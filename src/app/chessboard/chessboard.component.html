

<!-- User Management -->
<div class="user-controls">
  <label for="username"></label>
  <div class="input-container">
    <input
      type="text"
      id="username"
      [(ngModel)]="username"
      placeholder="Enter your username"
    />
  </div>

  <div class="button-container">
    <button class="user-button create-btn" (click)="createUser()">Create User</button>

    <!-- Conditionally show the Log In button only when the user is not logged in -->
    <button *ngIf="!currentUser" class="user-button login-btn" (click)="loginUser()">Log In</button>
    
    <!-- Conditionally show the Log Out button only when the user is logged in -->
    <button *ngIf="currentUser" class="user-button logout-btn" (click)="logout()">Logout</button>
  </div>
</div>



<!-- Chessboard container -->
<div class="chessboard">
  <!-- Render the chessboard -->
  <div *ngFor="let row of boardState; let rowIndex = index" class="row">
    <div
      *ngFor="let cell of row; let colIndex = index"
      class="square"
      [ngClass]="[
        getSquareClass(rowIndex, colIndex), 
        selectedSquare === getSquareFromIndices(rowIndex, colIndex) ? 'selected' : ''
      ]"
      (click)="onSquareClick(rowIndex, colIndex)"
      [attr.aria-label]="'Chess square ' + getSquareFromIndices(rowIndex, colIndex)"
    >
      <!-- Display the piece as an image if the cell is not empty -->
      <img
        *ngIf="cell"
        [src]="getPieceImage(cell)"
        [alt]="cell | uppercase"
        class="chess-piece"
      />
      
    </div>
  </div>
</div>

<!-- Game Management Controls -->
<div class="controls">
  <button (click)="startNewGame()">Start New Game</button>
  <button [disabled]="!currentGame" (click)="resetGame()">Reset Game</button>
  <button (click)="loadGames()">Load Games</button>
  <button [disabled]="!currentGame" (click)="saveGame()">Save Game</button>

  <!-- Error Message for Invalid Moves -->
  <div *ngIf="invalidMoveMessage" class="error-message">
    {{ invalidMoveMessage }}
  </div>
</div>
